# 에이전트 팀 설계 플레이북

> 이 문서를 새 프로젝트에 붙여넣고 Claude에게 전달하면,
> 해당 프로젝트에 맞는 에이전트 팀을 설계할 수 있습니다.

---

## 사용법

1. 새 프로젝트 폴더를 만든다
2. 이 문서를 프로젝트 안에 넣는다
3. Claude 세션을 열고 아래 프롬프트를 사용한다

### 프롬프트 템플릿

```
이 프로젝트에 에이전트 팀을 설계해줘.
첨부한 PLAYBOOK.md의 프로세스를 따라서 진행해줘.

[프로젝트 설명]
- 목적: (예: 정부 과제 사업계획서 작성)
- 주요 산출물: (예: 사업계획서 PDF)
- 사용자: (예: 나 혼자 / 팀 3명)
- 특이사항: (예: 심사 기준이 정해져 있음, 재무제표 필요 등)

[참고 자료]
- (프로젝트 폴더 안에 넣어둔 자료 목록)
```

---

## 설계 프로세스 (Claude가 따라야 할 단계)

### Phase 1: 역할 도출

**질문**: "이 프로젝트의 산출물을 만들려면 어떤 전문가가 필요한가?"

도출 방법:
1. 산출물의 **목차/구성 요소**를 나열한다
2. 각 구성 요소를 만들려면 **어떤 전문성**이 필요한지 분석한다
3. 만든 결과물을 **검증할 사람**은 누구인지 정한다
4. 전체를 **조율하는 사람**이 필요한지 판단한다

역할 분류 기준:
- **설계/기획 역할**: 방향을 잡는 사람 (PO, 분석가, 기획자)
- **제작 역할**: 실제 산출물을 만드는 사람 (개발자, 작성자, 디자이너)
- **검증 역할**: 품질을 확인하는 사람 (리뷰어, QA, 심사위원 시뮬레이션)
- **운영 역할**: 배포/관리하는 사람 (DevOps, 비용 관리)

**주의**: 역할은 6~10개가 적정. 너무 적으면 전문성 부족, 너무 많으면 오케스트레이션 비용이 산출물 가치를 초과한다.

### Phase 2: 에이전트 파일 생성

각 에이전트 파일의 구조:

```markdown
---
name: [에이전트-이름]
description: "[한 줄 설명. 자동 호출 조건을 포함. proactively 키워드로 자동 호출 유도]"
tools: [필요한 도구 목록]
model: [inherit / sonnet / haiku]
memory: project
---

# 역할
당신은 이 프로젝트의 **[역할명]**입니다.
[핵심 책임 한 줄]

# 범용 원칙 (모든 프로젝트 공통)
[이 역할이라면 어떤 프로젝트에서든 적용되는 원칙]
[체크리스트]
[산출물 형식]

---

# 프로젝트 맥락 (커스터마이징 필요)
[이 프로젝트에서만 적용되는 맥락]
```

**파일 위치**: `.claude/agents/[이름].md`

### Phase 3: 모델 배분

| 기준 | 모델 | 비용 |
|------|------|------|
| 고도의 판단, 창의성, 분석 필요 | Opus (inherit) | 높음 |
| 패턴 매칭, 검증, 분석적 작업 | Sonnet | 중간 |
| 정해진 절차 실행, 단순 작업 | Haiku | 낮음 |

**원칙**: 비용 최소화가 아니라 **가성비 최적화**. 판단이 필요한 역할에 저렴한 모델을 쓰면 재작업 비용이 더 크다.

### Phase 4: 오케스트레이션 설계

파이프라인 설계 원칙:

```
1. 작업 규모를 S/M/L/XL로 분류한다
2. 규모별로 관여하는 에이전트와 순서를 정한다
3. 비용 승인 지점을 정한다:
   - S/M: 확인 없이 바로 실행
   - L: 설계 확인 1회
   - XL: 범위/투자 수준 확인 + 설계 확인
4. 사용자 시그널 반영:
   - "바로 해" → 파이프라인 축소
   - "중요해" → 파이프라인 강화
```

산출물 체인 설계:
```
[기획 에이전트] → 방향/구조
→ [제작 에이전트] → 초안
→ [검증 에이전트] → 피드백
→ [수정] → [최종 검증]
```

### Phase 5: 메모리 초기화

각 에이전트의 `.claude/agent-memory/[이름]/MEMORY.md` 생성:

포함할 내용:
- 이 프로젝트에서 해당 역할이 알아야 할 **도메인 지식**
- 사용자의 **기준/선호** (취향이 아니라 원칙)
- **반복되는 이슈** (세션마다 축적)
- **피드백 이력** (세션마다 축적)

### Phase 6: CLAUDE.md에 오케스트레이션 규칙 추가

CLAUDE.md에 추가할 섹션:
- 에이전트 목록 (이름, 모델, 호출 시점)
- 규모별 파이프라인
- 비용 승인 규칙
- 사용자 시그널 테이블
- 산출물 체인
- 실행 로그/모니터링 규칙

---

## 핵심 설계 원칙 (Phase 전체에 적용)

### 1. 범용/프로젝트 분리
- 에이전트 프롬프트에 프로젝트명을 하드코딩하지 않는다
- "이 프로젝트"라고 쓰면 CLAUDE.md와 메모리에서 맥락을 파악한다
- 범용 원칙은 프로젝트가 바뀌어도 수정하지 않는다

### 2. 가성비 최적화
- 비용 = 토큰 + 시간 + 품질의 밸런스
- 간단한 건 빠르게, 중요한 건 제대로
- 사용자가 리소스 통제권을 가진다 (고비용 작업은 사전 승인)

### 3. 점진적 학습
- agent-memory에 피드백이 세션마다 축적된다
- 반복되는 비효율은 자동으로 조정 제안
- 사용자의 기준은 "취향"이 아니라 "원칙"으로 기록

### 4. 이식성
- 모든 설정은 프로젝트 폴더 안에 (글로벌 설정 의존 금지)
- checkout만 하면 동일 환경 재현
- agents-base/를 복사하면 새 프로젝트에서 바로 시작

---

## 파일 구조 템플릿

```
새프로젝트/
├── .claude/
│   ├── agents/              ← 이 프로젝트 전용 에이전트
│   │   ├── [역할1].md
│   │   ├── [역할2].md
│   │   └── ...
│   ├── agents-base/         ← 범용 템플릿 (다른 프로젝트에 복사용)
│   │   ├── README.md
│   │   ├── PLAYBOOK.md      ← 이 문서
│   │   ├── [역할1].md
│   │   └── ...
│   └── agent-memory/        ← 프로젝트별 학습 (복사하지 않음)
│       ├── [역할1]/MEMORY.md
│       └── ...
├── CLAUDE.md                ← 오케스트레이션 규칙 포함
└── [프로젝트 파일들]
```

---

## 예시: 사업계획서 작성 팀

> 아래는 예시입니다. 실제 설계 시 프로젝트 특성에 맞게 조정합니다.

### 역할 도출 예시

| 역할 | 책임 | 모델 |
|------|------|------|
| project-director | 전체 방향, 심사 기준 분석, 구조 설계 | Opus |
| market-analyst | 시장 분석, 경쟁사 조사, 트렌드 | Opus |
| finance-officer | 재무 계획, 손익 추정, 예산 편성 | Opus |
| tech-writer | 본문 작성, 문체 통일, 가독성 | Opus |
| compliance-checker | 심사 기준 충족 여부, 누락 항목 검증 | Sonnet |
| reviewer-simulator | 심사위원 관점 시뮬레이션, 약점 지적 | Sonnet |
| format-editor | 문서 형식, 페이지 구성, 시각 자료 | Haiku |

### 파이프라인 예시

```
project-director → 구조/목차 확정
→ market-analyst + finance-officer → 데이터 섹션 작성 (병렬)
→ tech-writer → 전체 본문 통합/작성
→ compliance-checker → 심사 기준 체크
→ reviewer-simulator → 심사위원 관점 피드백
→ 수정 반복
```

---

## 체크리스트: 설계 완료 확인

- [ ] 역할이 6~10개 범위인가?
- [ ] 설계/제작/검증/운영이 균형 있게 배분되었는가?
- [ ] 모델 배분이 역할 난이도에 맞는가?
- [ ] 파이프라인에 사용자 확인 지점이 있는가?
- [ ] 에이전트 파일이 "범용 원칙 + 프로젝트 맥락" 구조인가?
- [ ] 프로젝트명이 하드코딩되어 있지 않은가?
- [ ] CLAUDE.md에 오케스트레이션 규칙이 있는가?
- [ ] agent-memory 디렉토리가 생성되었는가?

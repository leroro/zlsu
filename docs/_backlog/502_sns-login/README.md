# SNS 로그인 연동 (카카오)

## 개요

카카오 계정으로 로그인할 수 있는 기능 추가

## 현재 상태

- [ ] 미착수

## 의존성

**두 가지 구현 방식 중 선택 필요:**

| 방식 | 설명 | 장점 | 단점 |
|------|------|------|------|
| A. 단독 구현 | localStorage + 카카오 SDK | 빠르게 구현 가능 | DB 도입 시 재작업 필요 |
| B. DB 연동 후 구현 | Supabase Auth 활용 | 한 번에 완성 | DB 세팅 선행 필요 |

**권장:** DB 도입 계획이 있다면 **방식 B** 권장 (작업량 적음)

---

## 방식 A: 단독 구현 (localStorage 기반)

### 사용자 작업 (필수)

#### 1단계: 카카오 개발자 앱 등록

1. https://developers.kakao.com 접속
2. 카카오 계정으로 로그인
3. **내 애플리케이션 → 애플리케이션 추가하기**
4. 앱 정보 입력:
   - 앱 이름: `ZLSU 수영모임`
   - 회사명: 개인/동호회명
5. 저장 후 **앱 키** 탭에서 `JavaScript 키` 복사

#### 2단계: 플랫폼 등록

1. **앱 설정 → 플랫폼**
2. **Web 플랫폼 등록**
3. 사이트 도메인 입력:
   - 개발: `http://localhost:5173`
   - 배포: 실제 도메인 (나중에 추가)

#### 3단계: Redirect URI 등록

1. **제품 설정 → 카카오 로그인**
2. 활성화 설정: **ON**
3. **Redirect URI** 등록:
   ```
   http://localhost:5173/auth/kakao/callback
   ```

#### 4단계: 동의항목 설정

1. **제품 설정 → 카카오 로그인 → 동의항목**
2. 필수 동의로 설정:
   - 닉네임
   - 카카오계정(이메일)

#### 5단계: 키 전달

- 복사한 `JavaScript 키`를 Claude에게 전달

**전달 형식 예시:**
```
JavaScript 키: abcd1234efgh5678ijkl
```

### Claude 작업

- [ ] 카카오 SDK 설치 및 초기화
- [ ] 환경변수 설정 (.env)
- [ ] 카카오 로그인 버튼 UI 구현
- [ ] 로그인 콜백 페이지 생성 (`/auth/kakao/callback`)
- [ ] AuthContext 수정 (카카오 로그인 통합)
- [ ] 이메일 기반 회원 매칭 로직
- [ ] 미가입자 처리 (가입 안내 또는 자동 연결)
- [ ] 로그아웃 처리
- [ ] 에러 핸들링

### 파일 변경 예상

```
src/
├── lib/
│   └── kakao.ts              # 카카오 SDK 유틸리티 (신규)
├── pages/
│   ├── LoginPage.tsx         # 카카오 로그인 버튼 추가
│   └── KakaoCallbackPage.tsx # 콜백 처리 (신규)
├── contexts/
│   └── AuthContext.tsx       # 카카오 로그인 통합
└── routes.tsx                # 콜백 라우트 추가
```

---

## 방식 B: Supabase Auth 활용

> **선행 조건:** `issue-database-setup` 완료 필요

### 사용자 작업

1. 카카오 개발자 앱 등록 (방식 A와 동일)
2. Supabase 대시보드에서 카카오 Provider 활성화
3. 카카오 앱 키를 Supabase에 입력

### Claude 작업

- [ ] Supabase Auth 카카오 로그인 연동
- [ ] 로그인 버튼 UI
- [ ] 콜백 처리
- [ ] 세션 관리

**장점:** Supabase가 대부분 처리해주므로 코드량 적음

---

## 동작 플로우

```
사용자 → "카카오로 로그인" 클릭
    ↓
카카오 로그인 페이지로 이동
    ↓
사용자가 카카오에서 로그인/동의
    ↓
우리 사이트로 리다이렉트 (이메일, 닉네임 포함)
    ↓
이메일로 기존 회원 검색
    ↓
├─ 회원 있음 → 로그인 완료, 홈으로 이동
└─ 회원 없음 → "가입 신청이 필요합니다" 안내
```

---

## 체크리스트 (착수 전 확인)

- [ ] 구현 방식 선택 (A 또는 B)
- [ ] 카카오 개발자 앱 등록 완료
- [ ] JavaScript 키 확보
- [ ] Redirect URI 등록 완료
- [ ] 동의항목 설정 완료

---

## 관련 이슈

- `issue-database-setup`: DB 도입 (방식 B 선택 시 선행)

# 세션 작업 내역 (2026-02-09 #3)

## 완료된 작업

### 1. 정원(MAX_CAPACITY) 환경별 분기 구현
- **문제**: 테스트용으로 정원을 14→20으로 늘려놓은 상태에서 GitHub Pages 배포 시 "14/20 (남은 자리 6개)"로 표시되어 회원들에게 혼란 유발
- **해결**: Vite `import.meta.env.PROD`를 활용하여 환경별 자동 분기
  - 프로덕션 빌드 (GitHub Pages): 14명 (실제 운영)
  - 개발 환경 (localhost): 20명 (가입 플로우 테스트용)
- `constants.ts`의 `MAX_CAPACITY`를 환경 분기로 변경
- `api.ts`의 `DEFAULT_SETTINGS.maxCapacity`가 `MAX_CAPACITY` 상수를 참조하도록 통합

### 2. 에이전트 오케스트레이션 체계 구축
- CLAUDE.md에 에이전트 파이프라인 규칙 업데이트 (가성비 최적화 원칙 추가)
- `.claude/agents/` 폴더에 에이전트 프롬프트 파일 생성
- `.claude/agents-base/` 폴더에 기반 프롬프트 정리

## 변경된 파일

| 파일 | 변경 내용 |
|------|-----------|
| src/lib/constants.ts | MAX_CAPACITY 환경 분기 (PROD=14, DEV=20) |
| src/lib/api.ts | DEFAULT_SETTINGS.maxCapacity → MAX_CAPACITY 참조 |
| CLAUDE.md | 에이전트 오케스트레이션 규칙 업데이트 |
| .claude/agents/ | 에이전트 프롬프트 파일들 추가 |
| .claude/agents-base/ | 기반 프롬프트 파일 추가 |

## 다음 작업 (TODO)

### Phase 1 구현 (최우선)
- [ ] ApplyPage.tsx 3단계 재설계 구현
  - Step 1: 수영 자격 확인 UI
  - Step 2: 추천인 + 이벤트 의향 + 수모 선택 + 약관 동의
  - Step 3: 계정 생성 + 개인정보 + 수영정보
- [ ] 수모 옵션 상수/타입 추가 (constants.ts, types.ts)
- [ ] 체크리스트 수모 가격 수정 + 벌금 항목 추가
- [ ] createPendingMember 수모 선택 필드 추가

### 주의
- **정원 20은 개발 환경에서만 적용** — GitHub 배포 시 자동으로 14 적용
